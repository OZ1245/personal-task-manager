# Таблицы

[<- Назад (Технические подробности)](./index.md)

> <br>
>
> **Примечания:**
> <br>
> 
> 1. В таблицах указанные типы из PostgreSQL. В JSON-объектах типы из JS.
> 2. В полях названий и описаний содержится константа фразы для переводов. За исключением тех полей названий и описаний, которые заполняет сам пользователь.
>
> <br>

## Users. Пользователи

| Название   | Тип        | Значение по-умолчанию | Описание                 |
|------------|------------|-----------------------|--------------------------|
| id         | int8       | NULL                  | -                        |
| created    | timestampz | now()                 | Дата регистрации         |
| last_login | timestampz | now()                 | Последний вход в систему |
| email      | text       | NULL                  | Email                    |
| active     | boolean    | true                  | Пользователь активен     |
| settings   | jsonb      | NULL                  | Настройки пользователя   |

**settings {Object}:**

- **name** {String} Отображаемое имя
- **language** {String} Язык

## Projects. Проекты

| Название | Тип        | Значение по-умолчанию | Описание          |
|----------|------------|-----------------------|-------------------|
| id       | int8       | NULL                  | -                 |
| created  | timestampz | now()                 | Дата создания     |
| name     | varchar    | NULL                  | Название          |
| user_id  | FK         | NULL                  | Владелец          |
| settings | jsonb      | NULL                  | Настройки проекта |

**settings {Object}:**

- **fields** {Array}:
  - **id** {String} Уникальный id. Формируется из временной метки создания
  - **filed_type** {String} Id типа поля. Внешний ключ на FieldTypes.id
  - **name** {String} Название поля
  - **editable** {Boolean} Редактируемое
  - **multiply** {Boolean} Множественное
  - **default_value** {String} Значение по-умолчанию
  - **rules** {Array} Набор правил. Внешние ключи на Rules.id

## Tasks. Задачи

Карточки задач

| Название   | Тип        | Значение по-умолчанию | Описание        |
|------------|------------|-----------------------|-----------------|
| id         | uuid       | NULL                  | -               |
| project_id | FK         | NULL                  | Id проекта      |
| created    | timestampz | now()                 | Дата создания   |
| modified   | timestampz | NULL                  | Дата изменения  |
| data       | jsonb      | NULL                  | Данные карточки |

**data {Array}:**

- **field_id** {String} Id поля. Внешний ключ на Projects.settings.fields.id
- **value** {*} Значение
- **created** {String} Временная метка создания
- **modified** {String} Временная метка последнего изменения

## Fields types

Предлагаемые типы полей для карточки задачи при настройке проекта.

| Название    | Тип  | Значение по-умолчанию | Описание              |
|-------------|------|-----------------------|-----------------------|
| id          | int8 | NULL                  | -                     |
| name        | text | NULL                  | Название поля         |
| description | text | NULL                  | Описание поля         |
| code        | text | NULL                  | Код поля для фронтенд |

## TODO: Templates

| Название | Тип     | Значение по-умолчанию | Описание                   |
|----------|---------|-----------------------|----------------------------|
| id       | int8    | NULL                  | -                          |
| name     | varchar | NULL                  | Название                   |
| userId   | FK      | -1                    | Владелец.                  |
|          |         |                       | Если значение -1,          |
|          |         |                       | то это предлагаемый шаблон |
| settings | jsonb   | NULL                  | Набор настроек             |

## TODO: Rules

| Название    | Тип  | Значение по-умолчанию | Описание |
|-------------|------|-----------------------|----------|
| id          | uuid | NULL                  | -        |
| description | text | NULL                  | Описание |
| rule        | text | NULL                  | Правило  |

## Translations. Переводы

Константы фраз и их переводы. Пока поддерживается только русский и английский.

| Название | Тип        | Значение по-умолчанию | Описание              |
|----------|------------|-----------------------|-----------------------|
| id       | uuid       | NULL                  | -                     |
| created  | timestampz | now()                 | Дата создания         |
| modified | timestampz | NULL                  | Дата изменения        |
| constant | text       | NULL                  | Константа фразы       |
| lang:en  | text       | NULL                  | Перевод на английский |
| lang:ru  | text       | NULL                  | Перевод на русский    |
